# フォームUI仕様書

**プロジェクト**: ユーザー管理システム
**作成日**: 2025-11-15

---

## ユーザー登録フォーム

**送信先**: POST /api/users

### 入力項目

**姓・名**
- 必須、1〜50文字
- プレースホルダー: "山田"、"太郎"
- エラー: "姓を入力してください"、"50文字以内で入力してください"
- フォーカスアウト時にチェック

**メールアドレス**
- 必須、Email形式、3〜254文字
- プレースホルダー: "example@example.com"
- 重複チェック（サーバー側）
- エラー:
  - "メールアドレスを入力してください"
  - "正しいメールアドレス形式で入力してください"
  - "このメールアドレスは既に登録されています"
- 入力中＋フォーカスアウト時にチェック

**パスワード**
- 必須、8〜128文字
- 英大文字・小文字・数字・記号を1文字以上含む
- 表示/非表示トグルボタンあり
- パスワード強度インジケーター（弱/中/強）
- エラー:
  - "パスワードを入力してください"
  - "パスワードは8文字以上で入力してください"
  - "英大文字、小文字、数字、記号をそれぞれ1文字以上含めてください"
- 入力中にリアルタイムチェック

**パスワード（確認）**
- 必須、パスワードと一致必須
- プレースホルダー: "パスワードを再入力"
- エラー: "パスワードが一致しません"

**生年月日**
- 必須、yyyy-MM-dd形式
- 13歳以上120歳以下
- エラー:
  - "生年月日を入力してください"
  - "13歳未満の方はご利用いただけません"

**性別**
- 任意、ラジオボタン
- 選択肢: 男性/女性/その他/回答しない

**利用規約に同意**
- 必須、チェックボックス
- 利用規約リンク（別タブで開く）
- エラー: "利用規約に同意してください"

---

## ユーザー編集フォーム

**送信先**: PUT /api/users/:id

### 入力項目

基本的にユーザー登録フォームと同じだけど、以下の点が違う：

**メールアドレス**
- 重複チェック時に自分自身のIDは除外

**ステータス**（管理者のみ変更可能）
- 必須、ラジオボタン
- 選択肢: アクティブ/停止中

**パスワード**
- このフォームでは変更できない（別の画面で変更）

---

## ログインフォーム

**送信先**: POST /api/auth/login

### 入力項目

**メールアドレス**
- 必須、Email形式
- Cookie保存の場合は自動入力
- エラー: "メールアドレスを入力してください"

**パスワード**
- 必須
- 表示/非表示トグルボタンあり
- エラー: "メールアドレスまたはパスワードが正しくありません"（認証失敗時）

**ログイン状態を保持**
- チェックボックス（任意）
- チェック時はCookie有効期限30日

---

## 共通のバリデーションルール

**クライアント側**
- 入力中（onChange）、フォーカスアウト時（onBlur）、送信時にチェック
- エラーメッセージは入力欄の下に赤文字で表示
- エラーがある項目は赤枠で囲む
- エラー表示の優先順位: 必須 → 形式 → 文字数 → 重複 → その他

**サーバー側**
- クライアントと同じチェックをサーバーでも実施
- 重複チェック、権限チェックなどDB必要なものはサーバーで
- サーバーエラーはフォーム上部にまとめて表示

**送信ボタン**
- エラーがある場合は無効化
- 送信中はローディング表示＋無効化（二重送信防止）

---

## アクセシビリティ・レスポンシブ対応

**アクセシビリティ**
- ARIA属性つける（aria-required, aria-invalid等）
- すべての入力欄にlabel要素
- Tabキーでフォーカス移動可能
- Enterキーで送信

**レスポンシブ**
- ブレークポイント: モバイル 〜767px、タブレット 768〜1023px、デスクトップ 1024px〜
- モバイル: フォントサイズ16px以上（ズーム防止）、タップ領域44px以上
- inputmode属性使う（email, numeric等）

---

## メモ

- バリデーションメッセージは日本語でわかりやすく
- エラーは親切に（どうすれば直せるか明確に）
- 送信ボタンのローディング中は「送信中...」みたいなテキスト表示
